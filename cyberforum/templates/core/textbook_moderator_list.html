{% extends 'base.html' %}
{% load static %}
{% block content %}
<h1>Модерация учебников</h1>
<a href="{% url 'core:textbook_create' %}" class="btn btn-success mb-3">+ Добавить учебник</a>
<div>
  <a href="{% url 'moderation:dashboard' %}" class="btn btn-sm btn-outline-primary">Назад</a>
</div>

{% if textbooks %}
  <div class="table-responsive">
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>Название</th>
          <th>Аудитория</th>
          <th>Файл</th>
          <th>Дата</th>
          <th>Действия</th>
        </tr>
      </thead>
      <tbody>
        {% for tb in textbooks %}
          <tr>
            <td>{{ tb.title }}</td>
            <td>{{ tb.get_audience_display }}</td>
            <td><a href="{{ tb.file.url }}" target="_blank">Скачать</a></td>
            <td>{{ tb.uploaded_at|date:"d.m.Y H:i" }}</td>
            <td>
              <form method="post" action="{% url 'core:textbook_delete' tb.id %}" style="display:inline;">
                {% csrf_token %}
                <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Удалить учебник?')">Удалить</button>
              </form>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% else %}
  <p>Учебники не загружены.</p>
{% endif %}
{% endblock %}